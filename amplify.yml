version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm i
    build:
      commands:
        - npm run ng build -- --configuration=app
  artifacts:
    baseDirectory: dist/dashboard
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
amplify:
  backend: 
    name: backendA
  # other configurations for backendA

# CloudFront distribution configuration for path-based routing

distribution:
  defaultPath:
    rewrite: /dashboard/index.html
  behaviors:
    - path: /dashboard/*
      defaultTTL: 0
      minTTL: 0
      maxTTL: 0
      forward: 
        cookies: "all"
        queryString: true
      # other configuration for the first project
